<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTP ‡¶∞‡¶ø‡¶∏‡¶ø‡¶≠‡¶æ‡¶∞ - ‡¶∏‡ßç‡¶•‡¶æ‡¶Ø‡¶º‡ßÄ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .container { 
            max-width: 600px; 
            width: 100%;
            background: white; 
            border-radius: 20px; 
            overflow: hidden; 
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        .container:hover { transform: translateY(-5px); }
        .header { 
            background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
            color: white; 
            padding: 25px 20px; 
            text-align: center; 
            position: relative;
            overflow: hidden;
        }
        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(255,255,255,0.3);
        }
        .header h1 { font-size: 24px; font-weight: 600; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .email-box { 
            padding: 20px; 
            background: linear-gradient(to right, #e3f2fd, #bbdefb);
            text-align: center; 
            font-weight: bold; 
            font-size: 18px; 
            border-bottom: 1px solid #e1e1e1;
            position: relative;
        }
        .email-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: #2196f3;
        }
        .btn-group { 
            display: flex; 
            justify-content: center; 
            gap: 12px; 
            padding: 20px; 
            flex-wrap: wrap; 
            background: #f8f9fa;
        }
        button { 
            padding: 12px 24px; 
            border: none; 
            border-radius: 10px; 
            font-size: 16px; 
            cursor: pointer; 
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn-primary { background: linear-gradient(to right, #2196f3, #21cbf3); color: white; }
        .btn-success { background: linear-gradient(to right, #43a047, #66bb6a); color: white; }
        .btn-warning { background: linear-gradient(to right, #ff9800, #ffb74d); color: white; }
        button:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
        button:active { transform: translateY(1px); }
        .inbox { padding: 20px; min-height: 200px; background: #f5f5f5; }
        .otp-item { 
            background: linear-gradient(to right, #d4edda, #c8e6c9);
            border: 1px solid #c3e6cb; 
            border-radius: 12px; 
            padding: 20px; 
            margin-bottom: 15px; 
            text-align: center; 
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .otp-item:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.1); }
        .otp-code { 
            font-size: 32px; 
            font-weight: bold; 
            color: #155724; 
            letter-spacing: 4px; 
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .copy-btn { 
            background: linear-gradient(to right, #17a2b8, #5bc0de);
            color: white; 
            padding: 12px 20px; 
            font-size: 15px; 
            border-radius: 8px;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        .copy-btn:hover { background: linear-gradient(to right, #138496, #46b8da); }
        .telegram-section { padding: 20px; background: #f8f9fa; border-top: 1px solid #e9ecef; }
        .telegram-title { text-align: center; margin-bottom: 15px; font-size: 18px; color: #495057; font-weight: 600; }
        .telegram-btn {
            display: block; margin: 0 auto; padding: 18px; 
            background: linear-gradient(to right, #0088cc, #00aced);
            color: white; text-align: center; border-radius: 12px; 
            text-decoration: none; font-size: 18px; font-weight: bold;
            display: flex; align-items: center; justify-content: center; gap: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            max-width: 300px;
        }
        .telegram-btn:hover { transform: translateY(-3px); background: linear-gradient(to right, #0077b5, #0099e5); }
        .telegram-btn svg { width: 28px; height: 28px; }
        .no-otp { text-align: center; color: #6c757d; padding: 40px 20px; font-size: 18px; }
        .receive-time { font-size: 13px; color: #28a745; margin-top: 8px; font-weight: 600; text-align: center; }
        .notification {
            position: fixed; top: 20px; right: 20px; padding: 15px 25px;
            background: #4caf50; color: white; border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); font-size: 16px;
            transform: translateX(150%); transition: transform 0.4s ease; z-index: 1000;
        }
        .notification.show { transform: translateX(0); }
        .status-bar {
            display: flex; justify-content: space-between; padding: 12px 20px;
            background: #e9ecef; font-size: 14px; color: #495057; border-top: 1px solid #dee2e6;
        }
        .auto-refresh { display: flex; align-items: center; gap: 8px; }
        .dot { width: 10px; height: 10px; border-radius: 50%; background: #28a745; animation: blink 1.5s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
        .otp-content { flex: 1; }
    </style>
</head>
<body>

<div class="container">
    <div class="header"><h1>ùóòùóîùó•ùó°ùóúùó°ùóö ùóïùó¨ ùóõùóîùóïùóúùóï</h1></div>
    <div class="email-box" id="email">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>

    <div class="btn-group">
        <button class="btn-primary" id="new">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM16 13H13V16C13 16.55 12.55 17 12 17C11.45 17 11 16.55 11 16V13H8C7.45 13 7 12.55 7 12C7 11.45 7.45 11 8 11H11V8C11 7.45 11.45 7 12 7C12.55 7 13 7.45 13 8V11H16C16.55 11 17 11.45 17 12C17 12.55 16.55 13 16 13Z" fill="white"/>
            </svg>
            ‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡ßá‡¶á‡¶≤
        </button>
        <button class="btn-success" id="copy">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z" fill="white"/>
            </svg>
            ‡¶Æ‡ßá‡¶á‡¶≤ ‡¶ï‡¶™‡¶ø
        </button>
        <button class="btn-warning" id="refresh">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4C7.58 4 4.01 7.58 4.01 12C4.01 16.42 7.58 20 12 20C15.73 20 18.84 17.45 19.73 14H17.65C16.83 16.33 14.61 18 12 18C8.69 18 6 15.31 6 12C6 8.69 8.69 6 12 6C13.66 6 15.14 6.69 16.22 7.78L13 11H20V4L17.65 6.35Z" fill="white"/>
            </svg>
            ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂
        </button>
    </div>

    <div class="inbox" id="inbox">
        <div class="no-otp">OTP ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...</div>
    </div>

    <div class="telegram-section">
        <div class="telegram-title">‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</div>
        <a href="https://earningbyhabib.github.io/Tempmail/Note.html" target="_blank" class="telegram-btn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" fill="white">
                <path d="M120 0C53.7 0 0 53.7 0 120s53.7 120 120 120 120-53.7 120-120S186.3 0 120 0zm57.6 73.4l-25.8 121.6c-1.9 8.9-7.3 11.1-14.8 6.9l-39.3-28.9-18.9 18.2c-2.1 2-3.8 3.6-7.8 3.6-5.2 0-3.8-1.9-11.1-11.9l-13.4-43.9-39-12.1c-8.5-2.6-8.5-8.5 1.8-12.6l156.2-60.1c7.4-3 13.9.9 13.9 9.2z"/>
            </svg>
            ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤
        </a>
    </div>
    
    <div class="status-bar">
        <div class="auto-refresh"><div class="dot"></div>‡¶Ö‡¶ü‡ßã ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º</div>
        <div id="lastUpdate">‡¶∂‡ßá‡¶∑ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü: ‡¶è‡¶ñ‡¶®‡¶á</div>
    </div>
</div>

<div class="notification" id="notification">‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!</div>

<script>
    const API = 'https://api.guerrillamail.com/ajax.php';
    let sid = localStorage.getItem('gm_sid') || '';
    let email = localStorage.getItem('gm_email') || '';
    const STORAGE_KEY = 'saved_otps';

    function showNotification(msg) {
        const n = document.getElementById('notification');
        n.textContent = msg;
        n.classList.add('show');
        setTimeout(() => n.classList.remove('show'), 2000);
    }

    function loadSavedOTPs() {
        const saved = localStorage.getItem(STORAGE_KEY);
        return saved ? JSON.parse(saved) : [];
    }

    function saveOTP(otp) {
        const otps = loadSavedOTPs();
        const now = new Date().toLocaleTimeString('bn-BD', { hour: '2-digit', minute: '2-digit' });
        if (!otps.find(o => o.code === otp)) {
            otps.push({ code: otp, time: now });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(otps));
            return true;
        }
        return false;
    }

    function extractOTP(text) {
        const match = text.match(/\b\d{4,8}\b/g);
        return match ? match[0] : null;
    }

    function displaySavedOTPs() {
        const otps = loadSavedOTPs();
        const inbox = document.getElementById('inbox');
        let html = '';

        if (otps.length === 0) {
            html = '<div class="no-otp">OTP ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...</div>';
        } else {
            otps.forEach(item => {
                html += `
                    <div class="otp-item">
                        <div class="otp-content">
                            <div class="otp-code">${item.code}</div>
                            <div class="receive-time">‡¶∞‡¶ø‡¶∏‡¶ø‡¶≠: ${item.time}</div>
                        </div>
                        <button class="copy-btn" onclick="copyOTP('${item.code}')">OTP ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    </div>
                `;
            });
        }

        if (inbox.innerHTML !== html) {
            inbox.innerHTML = html;
        }
    }

    async function loadEmail() {
        if (sid && email) {
            document.getElementById('email').innerHTML = `<strong>${email}</strong>`;
            displaySavedOTPs();
            return;
        }

        const res = await fetch(`${API}?f=get_email_address`);
        const data = await res.json();
        email = data.email_addr;
        sid = data.sid_token;

        localStorage.setItem('gm_email', email);
        localStorage.setItem('gm_sid', sid);
        localStorage.removeItem(STORAGE_KEY);

        document.getElementById('email').innerHTML = `<strong>${email}</strong>`;
        document.getElementById('inbox').innerHTML = '<div class="no-otp">OTP ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...</div>';
    }

    async function checkInbox() {
        if (!sid) return;
        try {
            const res = await fetch(`${API}?f=check_email&seq=0&sid_token=${sid}`);
            const data = await res.json();
            if (data.list && data.list.length > 0) {
                let newFound = false;
                for (const m of data.list) {
                    const mailRes = await fetch(`${API}?f=fetch_email&email_id=${m.mail_id}&sid_token=${sid}`);
                    const mailData = await mailRes.json();
                    const body = (mailData.mail_body || '') + (mailData.mail_text || '');
                    const otp = extractOTP(body);
                    if (otp && saveOTP(otp)) newFound = true;
                }
                if (newFound) {
                    displaySavedOTPs();
                    showNotification('‡¶®‡¶§‡ßÅ‡¶® OTP ‡¶è‡¶∏‡ßá‡¶õ‡ßá!');
                }
            }
            updateTime();
        } catch (e) { console.error(e); }
    }

    function copyOTP(code) {
        navigator.clipboard.writeText(code).then(() => showNotification('OTP ‡¶ï‡¶™‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá: ' + code));
    }

    function updateTime() {
        const now = new Date().toLocaleTimeString('bn-BD', { hour: '2-digit', minute: '2-digit' });
        document.getElementById('lastUpdate').textContent = `‡¶∂‡ßá‡¶∑ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü: ${now}`;
    }

    // ‡¶¨‡¶æ‡¶ü‡¶® ‚Äî ‡¶ï‡ßã‡¶®‡ßã confirm ‡¶®‡ßá‡¶á
    document.getElementById('new').onclick = () => {
        localStorage.clear();
        sid = ''; email = '';
        loadEmail();
        showNotification('‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡ßá‡¶á‡¶≤ ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
    };

    document.getElementById('copy').onclick = () => {
        if (email) navigator.clipboard.writeText(email).then(() => showNotification('‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶ï‡¶™‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!'));
    };

    document.getElementById('refresh').onclick = () => {
        checkInbox();
        showNotification('‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...');
    };

    setInterval(checkInbox, 5000);
    setInterval(updateTime, 1000);

    loadEmail();
</script>

</body>
</html>
